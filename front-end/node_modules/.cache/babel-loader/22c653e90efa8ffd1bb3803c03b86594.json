{"ast":null,"code":"var _jsxFileName = \"/home/pc/Documentos/Zayda/Documentos/django_project/mercatodo/front-end/src/components/Agregar/Agregar.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Nav } from \"../Nav/Nav\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory, useParams } from \"react-router\";\nimport * as MercatodoServer from \"../MercatodoServer\"; // import styles from './Agregar.module.css'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Agregar = () => {\n  _s();\n\n  const initialState = {\n    name: \"\",\n    proveedor: \"\",\n    cantidad: 0,\n    date: \"\",\n    descripcion: \"\",\n    categoria: \"\"\n  };\n  const [product, setProduct] = useState(initialState);\n\n  const handleInputChange = e => {\n    setProduct({ ...product,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const history = useHistory();\n  const {\n    id\n  } = useParams();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      let res;\n\n      if (!id) {\n        res = await MercatodoServer.registerProduct(product);\n        const data = await res.json();\n\n        if (data.message === \"Sucesss\") {\n          setProduct(initialState);\n        }\n      } else {\n        await MercatodoServer.updateProduct(id, product);\n      }\n\n      history.push(\"/products\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const getProduct = async productId => {\n    try {\n      const res = await MercatodoServer.getProduct(productId);\n      const data = await res.json();\n      const {\n        pro_name,\n        pro_provider,\n        pro_existences,\n        pro_date,\n        pro_description,\n        pro_category\n      } = data.product;\n      setProduct({\n        name: pro_name,\n        proveedor: pro_provider,\n        cantidad: pro_existences,\n        date: pro_date.slice(0, -1),\n        descripcion: pro_description,\n        categoria: pro_category\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    if (id) {\n      getProduct(id);\n    } // eslint-disable-next-line\n\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"container mt-5 mb-5\",\n      children: [id ? /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"d-flex justify-content-center font-weight-bold h4\",\n        children: \"Editar Producto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"d-flex justify-content-center font-weight-bold h4\",\n        children: \"Agregar Producto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"row d-flex justify-content-center mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"col-sm-6\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                class: \"form-label\",\n                children: \"Nombre del producto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                class: \"form-control\",\n                name: \"name\",\n                title: \"No puedes a\\xF1adir caracteres especiales\",\n                required: true,\n                value: product.name,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                class: \"form-label\",\n                children: \"Proveedor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                class: \"form-control\",\n                name: \"proveedor\",\n                title: \"No puedes a\\xF1adir caracteres especiales\",\n                required: true,\n                value: product.proveedor,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                class: \"form-label\",\n                children: \"Cantidad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                class: \"form-control\",\n                name: \"cantidad\",\n                pattern: \"/^([0-9])*$/\",\n                title: \"Dato no valido\",\n                required: true,\n                value: product.cantidad,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                class: \"form-label\",\n                children: \"Fecha de llegada\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"datetime-local\",\n                class: \"form-control\",\n                name: \"date\",\n                title: \"Dato no valido\",\n                required: true,\n                value: product.date,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                class: \"form-label\",\n                children: \"Descripci\\xF3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                type: \"text\",\n                class: \"form-control\",\n                maxLength: \"40\",\n                name: \"descripcion\",\n                required: true,\n                value: product.descripcion,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                class: \"form-label\",\n                children: \"Categoria\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                class: \"form-control\",\n                name: \"categoria\",\n                onChange: handleInputChange,\n                value: product.categoria,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1\",\n                  children: \"C\\xE1rnicos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"2\",\n                  children: \"L\\xE1cteos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"3\",\n                  children: \"Embutidos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"4\",\n                  children: \"Bebidas\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"5\",\n                  children: \"Granos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"6\",\n                  children: \"Enlatados\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"7\",\n                  children: \"Frutas y verduras\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"8\",\n                  children: \"Dulcer\\xEDa\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"9\",\n                  children: \"Elementos de aseo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"10\",\n                  children: \"Desinfectantes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"11\",\n                  children: \"Aseo personal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this), id ? /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              class: \"btn btn-primary\",\n              children: \"Editar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              class: \"btn btn-primary\",\n              children: \"Agregar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/products\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                class: \"btn btn-danger ml-3\",\n                children: \"Cancelar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Agregar, \"QheugdaQ7ph2Dhfe6rC/iP8Vy30=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = Agregar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Agregar\");","map":{"version":3,"sources":["/home/pc/Documentos/Zayda/Documentos/django_project/mercatodo/front-end/src/components/Agregar/Agregar.jsx"],"names":["React","useState","useEffect","Nav","Link","useHistory","useParams","MercatodoServer","Agregar","initialState","name","proveedor","cantidad","date","descripcion","categoria","product","setProduct","handleInputChange","e","target","value","history","id","handleSubmit","preventDefault","res","registerProduct","data","json","message","updateProduct","push","error","console","log","getProduct","productId","pro_name","pro_provider","pro_existences","pro_date","pro_description","pro_category","slice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Nav } from \"../Nav/Nav\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory, useParams } from \"react-router\";\nimport * as MercatodoServer from \"../MercatodoServer\";\n\n// import styles from './Agregar.module.css'\n\nexport const Agregar = () => {\n  const initialState = {\n    name: \"\",\n    proveedor: \"\",\n    cantidad: 0,\n    date: \"\",\n    descripcion: \"\",\n    categoria: \"\",\n  };\n  const [product, setProduct] = useState(initialState);\n  const handleInputChange = (e) => {\n    setProduct({ ...product, [e.target.name]: e.target.value });\n  };\n\n  const history = useHistory();\n  const { id } = useParams();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      let res;\n      if (!id) {\n        res = await MercatodoServer.registerProduct(product);\n        const data = await res.json();\n        if (data.message === \"Sucesss\") {\n          setProduct(initialState);\n        } \n      } else {\n        await MercatodoServer.updateProduct(id,product)\n      }\n      history.push(\"/products\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const getProduct = async (productId) => {\n    try {\n      const res = await MercatodoServer.getProduct(productId);\n      const data = await res.json();\n\n      const {\n        pro_name,\n        pro_provider,\n        pro_existences,\n        pro_date,\n        pro_description,\n        pro_category,\n      } = data.product;\n      setProduct({\n        name: pro_name,\n        proveedor: pro_provider,\n        cantidad: pro_existences,\n        date: pro_date.slice(0, -1),\n        descripcion: pro_description,\n        categoria: pro_category,\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    if (id) {\n      getProduct(id);\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <>\n      <Nav />\n      <div class=\"container mt-5 mb-5\">\n      {\n        id ? (\n          <p class=\"d-flex justify-content-center font-weight-bold h4\">\n          Editar Producto\n        </p>\n        ) : (\n          <p class=\"d-flex justify-content-center font-weight-bold h4\">\n          Agregar Producto\n        </p>\n      )}\n        \n        <div class=\"row d-flex justify-content-center mt-4\">\n          <div class=\"col-sm-6\">\n            <form onSubmit={handleSubmit}>\n              <div class=\"mb-2\">\n                <label class=\"form-label\">Nombre del producto</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  name=\"name\"\n                  title=\"No puedes añadir caracteres especiales\"\n                  required\n                  value={product.name}\n                  onChange={handleInputChange}\n                />\n              </div>\n              <div class=\"mb-2\">\n                <label class=\"form-label\">Proveedor</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  name=\"proveedor\"\n                  title=\"No puedes añadir caracteres especiales\"\n                  required\n                  value={product.proveedor}\n                  onChange={handleInputChange}\n                />\n              </div>\n              <div class=\"mb-2\">\n                <label class=\"form-label\">Cantidad</label>\n                <input\n                  type=\"number\"\n                  class=\"form-control\"\n                  name=\"cantidad\"\n                  pattern=\"/^([0-9])*$/\"\n                  title=\"Dato no valido\"\n                  required\n                  value={product.cantidad}\n                  onChange={handleInputChange}\n                />\n              </div>\n              <div class=\"mb-2\">\n                <label class=\"form-label\">Fecha de llegada</label>\n                <input\n                  type=\"datetime-local\"\n                  class=\"form-control\"\n                  name=\"date\"\n                  title=\"Dato no valido\"\n                  required\n                  value={product.date}\n                  onChange={handleInputChange}\n                />\n              </div>\n              <div class=\"mb-2\">\n                <label class=\"form-label\">Descripción</label>\n                <textarea\n                  type=\"text\"\n                  class=\"form-control\"\n                  maxLength=\"40\"\n                  name=\"descripcion\"\n                  required\n                  value={product.descripcion}\n                  onChange={handleInputChange}\n                />\n              </div>\n              <div class=\"mb-4\">\n                <label class=\"form-label\">Categoria</label>\n                <select\n                  class=\"form-control\"\n                  name=\"categoria\"\n                  onChange={handleInputChange}\n                  value={product.categoria}\n                >\n                  <option value=\"1\">Cárnicos</option>\n                  <option value=\"2\">Lácteos</option>\n                  <option value=\"3\">Embutidos</option>\n                  <option value=\"4\">Bebidas</option>\n                  <option value=\"5\">Granos</option>\n                  <option value=\"6\">Enlatados</option>\n                  <option value=\"7\">Frutas y verduras</option>\n                  <option value=\"8\">Dulcería</option>\n                  <option value=\"9\">Elementos de aseo</option>\n                  <option value=\"10\">Desinfectantes</option>\n                  <option value=\"11\">Aseo personal</option>\n                </select>\n              </div>\n              {id ? (\n                <button type=\"submit\" class=\"btn btn-primary\">Editar</button>\n              ) : (\n                <button type=\"submit\" class=\"btn btn-primary\">Agregar</button>\n              )}\n              \n              <Link to=\"/products\">\n                <button class=\"btn btn-danger ml-3\">Cancelar</button>\n              </Link>\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}